<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Login</title>
</head>
<body>
<label for="password">Password</label>

<h3 id="login_text"></h3>
<input type="text" id="password">
<button onclick="login()">Login</button>

<script type="text/javascript">
    var login_text = document.getElementById('login_text');
    function login() {
        login_text.innerHTML = "Logging in...";
        request(document.getElementById('password').value)
    }

    function request(pass) {
        var xmlHttp = new XMLHttpRequest();
        xmlHttp.open("GET", "https://merged-ray.herokuapp.com/auth?code=" + pass, false); // false for synchronous request
        xmlHttp.onreadystatechange = function () {
            callback(xmlHttp.responseText);
        };
        xmlHttp.send();
    }

    function callback(res) {
        if (res.failed) {
            login_text.innerHTML = "Login Failed, please try again";
        } else {
            document.open("text/html", "replace");
            document.write(res);
            document.close();
        }

    }
</script>
</body>
</html>